<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Data Penduduk</title>
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Import Poppins Font -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }

    /* Modal Background */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0, 0, 0, 0.5);
      justify-content: center;
      align-items: center;
    }
  </style>
</head>
<body class="bg-gradient-to-r from-blue-50 to-blue-100 min-h-screen flex flex-col justify-center items-center">
  <!-- Container -->
  <div class="w-full max-w-4xl mx-auto p-6">
    <!-- Header -->
    <header class="text-center mb-8">
      <h1 class="text-4xl font-bold text-blue-700 mb-2">Website Data Penduduk</h1>
      <p class="text-gray-600 text-lg">Kelola data penduduk dengan mudah</p>
    </header>

    <!-- Add Data Form -->
    <section class="bg-white shadow-lg rounded-lg p-6 mb-8">
      <h2 class="text-2xl font-semibold text-blue-600 mb-4">Tambah Data Penduduk</h2>
      <form id="form-add" class="space-y-4">
        <div>
          <label class="block text-gray-700 font-medium mb-1">Nama Lengkap</label>
          <input type="text" id="nama" class="w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300" placeholder="Masukkan Nama Lengkap">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-1">Usia</label>
          <input type="number" id="usia" class="w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300" placeholder="Masukkan Usia">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-1">Alamat</label>
          <textarea id="alamat" class="w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300" placeholder="Masukkan Alamat"></textarea>
        </div>
        <button type="button" id="btn-add" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 shadow-lg transition">Tambah Data</button>
      </form>
    </section>

    <!-- Data Table -->
    <section class="bg-white shadow-lg rounded-lg p-6">
      <h2 class="text-2xl font-semibold text-blue-600 mb-4">Daftar Penduduk</h2>
      <div class="overflow-x-auto">
        <table class="min-w-full border-collapse bg-white">
          <thead>
            <tr class="bg-blue-100 text-blue-700">
              <th class="px-6 py-3 border text-left">No</th>
              <th class="px-6 py-3 border text-left">Nama</th>
              <th class="px-6 py-3 border text-center">Usia</th>
              <th class="px-6 py-3 border text-left">Alamat</th>
              <th class="px-6 py-3 border text-center">Aksi</th>
              <th class="px-6 py-3 border text-center">Detail</th>
            </tr>
          </thead>
          <tbody id="data-list">
            <!-- Data rows will go here -->
          </tbody>
        </table>
      </div>
    </section>
  </div>

  <!-- Edit Modal -->
  <div id="edit-modal" class="modal">
    <div class="bg-white rounded-lg p-6 w-96">
      <h2 class="text-xl font-semibold text-blue-600 mb-4">Edit Data Penduduk</h2>
      <form id="form-edit" class="space-y-4">
        <div>
          <label class="block text-gray-700 font-medium mb-1">Nama Lengkap</label>
          <input type="text" id="edit-nama" class="w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-1">Usia</label>
          <input type="number" id="edit-usia" class="w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300">
        </div>
        <div>
          <label class="block text-gray-700 font-medium mb-1">Alamat</label>
          <textarea id="edit-alamat" class="w-full px-4 py-2 border rounded-lg shadow-sm focus:outline-none focus:ring focus:ring-blue-300"></textarea>
        </div>
        <div class="flex justify-between">
          <button type="button" onclick="closeModal()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600">Batal</button>
          <button type="submit" id="btn-save" class="bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700">Simpan</button>
        </div>
      </form>
    </div>
  </div>

  <script>
    const dataList = document.getElementById('data-list');
    const formAdd = document.getElementById('form-add');
    const formEdit = document.getElementById('form-edit');
    const btnAdd = document.getElementById('btn-add');
    const modal = document.getElementById('edit-modal');
    const btnSave = document.getElementById('btn-save');
    let dataPenduduk = [];
    let no = 1;
    let currentIndex = null;

    // Add data
    btnAdd.addEventListener('click', () => {
      const nama = document.getElementById('nama').value.trim();
      const usia = document.getElementById('usia').value.trim();
      const alamat = document.getElementById('alamat').value.trim();

      if (nama && usia && alamat) {
        dataPenduduk.push({ no, nama, usia, alamat });
        no++;
        renderData();
        formAdd.reset();
      } else {
        alert('Semua field harus diisi!');
      }
    });

    // Render data
    function renderData() {
      dataList.innerHTML = '';
      dataPenduduk.forEach((item, index) => {
        const row = `
          <tr class="hover:bg-blue-50">
            <td class="px-6 py-4 border text-center">${item.no}</td>
            <td class="px-6 py-4 border">${item.nama}</td>
            <td class="px-6 py-4 border text-center">${item.usia}</td>
            <td class="px-6 py-4 border">${item.alamat}</td>
            <td class="px-6 py-4 border text-center">
              <button onclick="editData(${index})" class="bg-yellow-500 text-white px-4 py-2 rounded-lg hover:bg-yellow-600 shadow-md transition">Edit</button>
              <button onclick="deleteData(${index})" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 shadow-md transition">Hapus</button>
            </td>
            <td class="px-6 py-4 border text-center">
              <button onclick="showDetails(${index})" class="bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 shadow-md transition">Detail</button>
            </td>
          </tr>
        `;
        dataList.insertAdjacentHTML('beforeend', row);
      });
    }

    // Open modal with pre-filled data for editing
    function editData(index) {
      const item = dataPenduduk[index];
      document.getElementById('edit-nama').value = item.nama;
      document.getElementById('edit-usia').value = item.usia;
      document.getElementById('edit-alamat').value = item.alamat;
      currentIndex = index;
      modal.style.display = 'flex';
    }

    // Close modal
    function closeModal() {
      modal.style.display = 'none';
    }

    // Save edited data
    formEdit.addEventListener('submit', (e) => {
      e.preventDefault();

      const nama = document.getElementById('edit-nama').value.trim();
      const usia = document.getElementById('edit-usia').value.trim();
      const alamat = document.getElementById('edit-alamat').value.trim();

      if (nama && usia && alamat) {
        dataPenduduk[currentIndex] = { no: currentIndex + 1, nama, usia, alamat };
        renderData();
        closeModal();
      } else {
        alert('Semua field harus diisi!');
      }
    });

    // Delete data
    function deleteData(index) {
      dataPenduduk.splice(index, 1);
      renderData();
    }

    // Show details
    function showDetails(index) {
      const item = dataPenduduk[index];
      localStorage.setItem('selectedPenduduk', JSON.stringify(item));
      window.open('details.html', '_blank');
    }
  </script>
</body>
</html>
